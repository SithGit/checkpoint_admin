"use strict";(self.webpackChunkcheckpoint_admin=self.webpackChunkcheckpoint_admin||[]).push([[584],{4584:(C,d,t)=>{t.r(d),t.d(d,{LoginCredential:()=>u,default:()=>L});var g=t(177),i=t(4341),m=t(3782),p=t(1626),_=t(6354),c=t(9437),f=t(7673),n=t(4438);function E(a,h){if(1&a&&(n.j41(0,"div",20),n.EFF(1),n.k0s()),2&a){const e=n.XpG();n.R7$(),n.SpI(" ",e.errorMsg," ")}}let L=(()=>{class a{constructor(e,r){this.http=e,this.router=r,this.hasError=!1,this.onLoading=!1,this.errorMsg="Invalid username or password",this.apiUrl="https://api.ptlao.com",this.loginObj=new u}onLogin(){this.hasError=!1,this.onLoading=!0,this.http.post(this.apiUrl+"/api/authentication/login",this.loginObj).pipe((0,_.T)(e=>{console.log("res",e),e.accessToken&&(this.http.post(this.apiUrl+"/api/authentication/get-user-data",{},{headers:{Authorization:e.accessToken}}).subscribe(s=>{console.log("userData",s),localStorage.setItem("token",e.accessToken),localStorage.setItem("userData",JSON.stringify(s))}),localStorage.getItem("userData")?(this.onLoading=!1,this.router.navigate(["/dashboard"])):(this.hasError=!0,this.onLoading=!1))}),(0,c.W)(e=>(console.log("error ma",e),this.hasError=!0,this.onLoading=!1,(0,f.of)([])))).subscribe()}static#n=this.\u0275fac=function(r){return new(r||a)(n.rXU(p.Qq),n.rXU(m.Ix))};static#e=this.\u0275cmp=n.VBU({type:a,selectors:[["app-login"]],standalone:!0,features:[n.aNF],decls:26,vars:3,consts:[[1,"auth-main"],[1,"auth-wrapper","v3"],[1,"auth-form"],[1,"auth-header"],["href","javascript:"],["src","assets/images/logo.png","alt","logo",2,"height","80px","width","120px"],["action","#",1,"card","my-5"],[1,"card-body"],[1,"form-group","mb-3"],["for","username",1,"form-label"],["type","text","id","username","placeholder","Username","name","username",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Password","name","password",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],["class","alert alert-danger d-grid mt-4","role","alert",4,"ngIf"],[1,"d-grid","mt-4"],["type","button",1,"btn","btn-primary",3,"click","keydown.enter"],[1,"auth-footer","row"],[1,"col","my-1"],[1,"m-0"],["href","#","target","_blank"],["role","alert",1,"alert","alert-danger","d-grid","mt-4"]],template:function(r,o){1&r&&(n.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),n.nrm(5,"img",5),n.k0s()(),n.j41(6,"form",6)(7,"div",7)(8,"div",8)(9,"label",9),n.EFF(10,"Username"),n.k0s(),n.j41(11,"input",10),n.mxI("ngModelChange",function(l){return n.DH7(o.loginObj.username,l)||(o.loginObj.username=l),l}),n.bIt("keydown.enter",function(){return o.onLogin()}),n.k0s()(),n.j41(12,"div",8)(13,"label",11),n.EFF(14,"Password"),n.k0s(),n.j41(15,"input",12),n.mxI("ngModelChange",function(l){return n.DH7(o.loginObj.password,l)||(o.loginObj.password=l),l}),n.bIt("keydown.enter",function(){return o.onLogin()}),n.k0s()(),n.DNE(16,E,2,1,"div",13),n.j41(17,"div",14)(18,"button",15),n.bIt("click",function(){return o.onLogin()})("keydown.enter",function(){return o.onLogin()}),n.EFF(19,"Login"),n.k0s()()()(),n.j41(20,"div",16)(21,"div",17)(22,"p",18),n.EFF(23,"Copyright \xa9 "),n.j41(24,"a",19),n.EFF(25,"Vilasith Souksavat"),n.k0s()()()()()()()),2&r&&(n.R7$(11),n.R50("ngModel",o.loginObj.username),n.R7$(4),n.R50("ngModel",o.loginObj.password),n.R7$(),n.Y8G("ngIf",o.hasError))},dependencies:[m.iI,i.YN,i.qT,i.me,i.BC,i.cb,i.vS,i.cV,p.q1,g.MD,g.bT]})}return a})();class u{constructor(h="",e=""){this.username=h,this.password=e}}}}]);